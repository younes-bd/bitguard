{% extends 'crm/base_crm.html' %}
{% load static %}

{% block dashboard_content %}
<div class="max-w-2xl mx-auto">
    <div class="mb-6">
        <a href="{% url 'crm_client_detail' client.id %}" class="btn-text"
            style="color: #6b7280; text-decoration: none;">
            <i class="fas fa-arrow-left"></i> Back to {{ client.name }}
        </a>
    </div>

    <div class="card">
        <div class="flex items-center gap-4 mb-6 border-b border-gray-100 pb-6">
            <div class="w-12 h-12 rounded-lg bg-blue-50 flex items-center justify-center text-blue-600 text-xl"
                style="width: 48px; height: 48px; background: #eff6ff; display: flex; align-items: center; justify-content: center; border-radius: 8px;">
                <i class="fas fa-file-contract"></i>
            </div>
            <div>
                <h1 class="text-2xl font-bold text-dark" style="font-size: 1.5rem; font-weight: 700;">Add Client
                    Contract</h1>
                <p class="text-sm text-gray" style="color: #6b7280;">Upload a new agreement for {{ client.name }}.</p>
            </div>
        </div>

        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}

            <div class="space-y-6" style="display: flex; flex-direction: column; gap: 24px;">
                <!-- Title -->
                <div>
                    <label class="block text-sm font-semibold text-gray mb-1"
                        style="display: block; font-weight: 600; margin-bottom: 4px; color: #374151;">Contract
                        Title</label>
                    {{ form.name }}
                </div>

                <!-- Dates -->
                <div class="grid grid-cols-2 gap-6" style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                    <div>
                        <label class="block text-sm font-semibold text-gray mb-1"
                            style="display: block; font-weight: 600; margin-bottom: 4px; color: #374151;">Start
                            Date</label>
                        {{ form.start_date }}
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray mb-1"
                            style="display: block; font-weight: 600; margin-bottom: 4px; color: #374151;">End
                            Date</label>
                        {{ form.end_date }}
                    </div>
                </div>

                <!-- Value & Document -->
                <div class="grid grid-cols-2 gap-6" style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                    <div>
                        <label class="block text-sm font-semibold text-gray mb-1"
                            style="display: block; font-weight: 600; margin-bottom: 4px; color: #374151;">Total
                            Value</label>
                        <div style="position: relative;">
                            <span style="position: absolute; left: 10px; top: 10px; color: #9ca3af;">$</span>
                            {{ form.value }}
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray mb-1"
                            style="display: block; font-weight: 600; margin-bottom: 4px; color: #374151;">Document</label>
                        {{ form.document }}
                    </div>
                </div>

                <!-- Active Toggle -->
                <div
                    style="display: flex; align-items: center; gap: 10px; background: #f9fafb; padding: 16px; border-radius: 8px;">
                    {{ form.is_active }}
                    <label style="font-size: 14px; font-weight: 500; color: #374151;">Mark this contract as
                        Active</label>
                </div>
            </div>

            <div class="flex justify-end gap-3 mt-8 pt-6 border-t border-gray-100"
                style="margin-top: 32px; padding-top: 24px; border-top: 1px solid #e5e7eb; display: flex; justify-content: flex-end; gap: 12px;">
                <a href="{% url 'crm_client_detail' client.id %}" class="btn-secondary"
                    style="padding: 10px 20px; border-radius: 6px; background: white; border: 1px solid #d1d5db; color: #374151; text-decoration: none; font-weight: 500;">Cancel</a>
                <button type="submit" class="btn-primary"
                    style="padding: 10px 20px; border-radius: 6px; background: #0ea5e9; color: white; border: none; font-weight: 500; cursor: pointer;">
                    <i class="fas fa-save mr-2"></i> Save Contract
                </button>
            </div>
        </form>
    </div>
</div>

<script>
    // Simple inline enhancement to match styles without full Tailwind build dependency
    document.querySelectorAll('input, select').forEach(el => {
        if (!el.classList.contains('form-checkbox')) {
            el.style.width = '100%';
            el.style.padding = '10px';
            el.style.borderRadius = '6px';
            el.style.border = '1px solid #d1d5db';
            el.style.marginTop = '4px';
        }
    });
    // Fix padding for currency input
    document.querySelector('input[name="value"]').style.paddingLeft = '24px';
</script>
{% endblock %}