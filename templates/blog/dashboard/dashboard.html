{% extends "base.html" %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'accounts/css/accounts.css' %}?v=6">

<section class="bg-bitguard-light-blue hero-section tw-min-h-screen tw-p-8 tw-pt-24">

    <!-- Glow Effect -->
    <div class="purple-bg-grad reveal-up hero-glow-effect"></div>

    <div class="tw-relative tw-z-10 tw-container tw-mx-auto">
        <div class="bitguard-layout">

            <!-- Sidebar -->
            <div class="bitguard-sidebar-col">
                <div class="tw-space-y-2">
                    <a href="{% url 'blog:dashboard' %}" class="bitguard-sidebar-link active">
                        <i class="fas fa-th-large"></i> Overview
                    </a>
                    <a href="{% url 'blog:post_create' %}" class="bitguard-sidebar-link">
                        <i class="fas fa-plus-circle"></i> Create New Post
                    </a>
                    <a href="{% url 'blog:post_list' %}" class="bitguard-sidebar-link">
                        <i class="fas fa-external-link-alt"></i> View Live Blog
                    </a>
                </div>
            </div>

            <!-- Main Content -->
            <div class="bitguard-content-col">

                <!-- Stats Row -->
                <div class="tw-grid tw-grid-cols-1 tw-md:tw-grid-cols-3 tw-gap-6 tw-mb-8">
                    <div class="bitguard-card tw-p-6">
                        <h3 class="bitguard-label">Total Posts</h3>
                        <p class="tw-text-3xl tw-font-bold tw-text-slate-800">{{ posts.count }}</p>
                    </div>
                    <div class="bitguard-card tw-p-6">
                        <h3 class="bitguard-label">Published</h3>
                        <p class="tw-text-3xl tw-font-bold tw-text-cyan-600">{{ posts|length }}</p>
                    </div>
                    <div class="bitguard-card tw-p-6">
                        <h3 class="bitguard-label">Categories</h3>
                        <p class="tw-text-3xl tw-font-bold tw-text-indigo-600">{{ categories.count }}</p>
                    </div>
                </div>

                <div class="bitguard-card tw-p-8 tw-relative tw-overflow-hidden">
                    <!-- Gradient Enhancement -->
                    <div class="bitguard-gradient-bg"></div>

                    <div class="tw-relative tw-z-10">
                        <div class="tw-flex tw-justify-between tw-items-center tw-mb-8">
                            <div>
                                <h2 class="tw-text-2xl bitguard-heading">Manage Posts</h2>
                                <p class="tw-text-slate-500 tw-text-sm">View and manage your blog content.</p>
                            </div>
                            <a href="{% url 'blog:post_create' %}"
                                class="btn-bitguard tw-text-sm tw-px-4 tw-py-2 tw-text-white tw-no-underline">
                                <i class="fas fa-plus tw-mr-2"></i> New Post
                            </a>
                        </div>

                        {% if messages %}
                        <div class="tw-mb-8">
                            {% for message in messages %}
                            <div
                                class="tw-p-4 tw-rounded-xl tw-bg-cyan-500/10 tw-border tw-border-cyan-500/20 tw-text-cyan-600">
                                {{ message }}
                            </div>
                            {% endfor %}
                        </div>
                        {% endif %}

                        <!-- Posts Table -->
                        <div class="tw-overflow-x-auto">
                            <table class="tw-w-full tw-text-left">
                                <thead>
                                    <tr class="tw-border-b tw-border-slate-200">
                                        <th class="tw-px-4 tw-py-3 bitguard-label">Title</th>
                                        <th class="tw-px-4 tw-py-3 bitguard-label">Author</th>
                                        <th class="tw-px-4 tw-py-3 bitguard-label">Status</th>
                                        <th class="tw-px-4 tw-py-3 bitguard-label">Date</th>
                                        <th class="tw-px-4 tw-py-3 bitguard-label tw-text-right">Actions</th>
                                    </tr>
                                </thead>
                                <tbody class="tw-divide-y tw-divide-slate-200">
                                    {% for post in posts %}
                                    <tr class="hover:tw-bg-slate-50 tw-transition-colors">
                                        <td class="tw-px-4 tw-py-4">
                                            <span class="tw-font-medium tw-text-slate-700">{{ post.title }}</span>
                                        </td>
                                        <td class="tw-px-4 tw-py-4 tw-text-slate-500">
                                            {{ post.author.username }}
                                        </td>
                                        <td class="tw-px-4 tw-py-4">
                                            {% if post.status == 'published' %}
                                            <span
                                                class="tw-px-3 tw-py-1 tw-rounded-full tw-text-xs tw-bg-green-100 tw-text-green-700 tw-font-medium">Published</span>
                                            {% else %}
                                            <span
                                                class="tw-px-3 tw-py-1 tw-rounded-full tw-text-xs tw-bg-slate-100 tw-text-slate-600 tw-font-medium">Draft</span>
                                            {% endif %}
                                        </td>
                                        <td class="tw-px-4 tw-py-4 tw-text-slate-500 tw-text-sm">
                                            {{ post.publish_date|date:"M d, Y" }}
                                        </td>
                                        <td class="tw-px-4 tw-py-4 tw-text-right">
                                            <a href="{% url 'blog:post_update' post.slug %}"
                                                class="tw-text-slate-400 hover:tw-text-cyan-600 tw-mr-3" title="Edit">
                                                <i class="fas fa-edit"></i>
                                            </a>
                                            <a href="{% url 'blog:post_delete' post.slug %}"
                                                class="tw-text-slate-400 hover:tw-text-red-500" title="Delete">
                                                <i class="fas fa-trash"></i>
                                            </a>
                                        </td>
                                    </tr>
                                    {% empty %}
                                    <tr>
                                        <td colspan="5" class="tw-px-6 tw-py-12 tw-text-center tw-text-slate-500">
                                            No posts found. Start writing!
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}